
ifeq ($(TCSUPPORT_OPENWRT), 1)
HOST_CC=gcc
CFLAGS = -DTRENDCHIP
else
CC=gcc
CFLAGS += -DTRENDCHIP
endif


OBJS=trx.o
EXECS=trx
ifeq ($(TCSUPPORT_BB_256KB), 1)
CFLAGS += -DTCSUPPORT_BB_256KB
endif

ifeq ($(BOOTROM_LARGE_SIZE), 1)
CFLAGS += -DBOOTROM_LARGE_SIZE
endif

ifeq ($(TCSUPPORT_CMCCV2), 1)
CFLAGS += -DTCSUPPORT_CMCCV2
endif

ifeq ($(TCSUPPORT_LITTLE_ENDIAN), 1)
CFLAGS += -DTCSUPPORT_LITTLE_ENDIAN
endif

ifeq ($(TCSUPPORT_SECURE_BOOT), 1)
CFLAGS += -DTCSUPPORT_SECURE_BOOT
CFLAGS += -I$(GLOBAL_INC_DIR)
endif

ifeq ($(TCSUPPORT_BL2_OPTIMIZATION), 1)
CFLAGS += -DTCSUPPORT_BL2_OPTIMIZATION
endif

ifeq ($(TCSUPPORT_SECURE_BOOT_FLASH_OTP), 1)
CFLAGS += -DTCSUPPORT_SECURE_BOOT_FLASH_OTP
endif

ifeq ($(TCSUPPORT_SECURE_BOOT_V1), 1)
CFLAGS += -DTCSUPPORT_SECURE_BOOT_V1
endif

ifeq ($(TCSUPPORT_SECURE_BOOT_V2), 1)
CFLAGS += -DTCSUPPORT_SECURE_BOOT_V2
endif

ifeq ($(TCSUPPORT_BOOTROM_LARGE_SIZE), 1)
CFLAGS += -DBOOTROM_LARGE_SIZE
endif

ifeq ($(TCSUPPORT_OPENWRT), 1)
all: $(EXECS)
.c.o:
	$(HOST_CC) -c $(CFLAGS) $<

$(EXECS): $(OBJS)
	$(HOST_CC) -o $@ $(OBJS)
else
all: trx
.c.o:
	$(CC) -c $(CFLAGS) $<

cc: $(OBJS) $(MIPSLIBS)
	$(CC) -o $@ $(OBJS)
endif
clean:
	rm -f *.o *.a $(EXECS)
